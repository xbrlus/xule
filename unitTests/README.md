# Unit Tests
## Xule Unit Tests
The XULE unit tests define over 1,500 XULE expressions and define the expected output of those expressions.  

### Source Code
The source code for the XULE expressions is located in the base directory located under the source folder at xule/unitTests/source/base. These source files are compiled to create a rule set zip file that can be executed to generate an output file. A copy of a base case output file called output.txt with the expected results is included in the directory xule/unitTests/output/output.txt

The source code directory is broken down based on expression type. Each expression is defined in the file with a comment describing the expected result from running the expression.

The source code files can be generated by running the file xule/unitTests/commands/buildUnitTests.sh.  This shell script downloads the unit tests from a google sheet and generates the xule source files, it also compiles the xule files and generates the output. To run this file locally it needs to be run from the xule/unitTests/commands directory.  It also needs to be edited to point to your local installation of arelle.

### Compiled Code
The ruleset zip file is included in the directory /xule/unitTests/compiled/ut-ruleset.zip.  This file can be run to generate the output file.

The command to run the unit tests is as follows where $SCRIPT_DIR is the directory xule/unitTests/commands/: 

```python3.9 ~/arelle/Arelle-master/arellecmdline.py --plugins 'xuleUnit|transforms/SEC|validate/EFM|inlineXbrlDocumentSet' --xule-run --noCertificateCheck --xule-rule-set $SCRIPT_DIR/../compiled/ut-ruleset.zip --logNoRefObjectProperties --logFormat "[%(messageCode)s] %(message)s" >> $SCRIPT_DIR/../output/output.txt```

### Google SHeet with Unit Tests
The google sheet used to define the unit tests is located at:

```https://docs.google.com/spreadsheets/d/1l8ckUrmZ5YLgGGCGM7R5FWZ058jDc1Q8KWDck2Cx7EE/edit#gid=0```

## License and Patent

See [License](https://xbrl.us/dqc-license) for license information.  
See [Patent Notice](https://xbrl.us/dqc-patent) for patent infringement notice.

Copyright 2015 - 2023 XBRL US, Inc. All rights reserved.
